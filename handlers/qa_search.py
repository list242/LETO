import re

FAQ = [
    (["жилет", "снимать", "спасательный"], "Снимать спасательный жилет запрещено — штраф 10 000 руб."),
    (["жилет", "обязательно", "есть"], "Жилеты есть и для взрослых, и для детей. Они обязательны для всех участников."),
    (["курить", "сигарета", "табак"], "Курить на борту судна запрещено — штраф 10 000 руб."),
    (["дети", "ребёнок", "ребенок", "детский", "жилет"], "Можно кататься с детьми, если они в спасательных жилетах и под присмотром взрослого."),
    (["алкоголь", "пить", "выпивать"], "Употребление алкогольных напитков запрещено — штраф 10 000 руб."),
    (["прокат", "длится", "время", "поездка"], "Поездка длится 1,5 часа. Рекомендуем прибыть заранее для прохождения инструктажа."),
    (["инструктаж", "инструкция", "подготовка"], "Перед выходом проводится инструктаж длительностью около 15 минут."),
    (["маршрут", "движение"], "Движение осуществляется строго по маршруту, согласованному с инструктором."),
    (["перенос", "перенести", "дождь", "погода", "гроза"], "Перенос брони возможен при плохой погоде. Решение принимается по факту на месте причала."),
    (["отмена", "отменить", "вернуть", "отказ"], "Бронирование можно отменить минимум за 24 часа до начала."),
    (["опоздание", "опоздать", "позже", "меньше времени"], "При опоздании время прогулки уменьшается на длительность опоздания."),
    (["вместимость", "людей", "человек", "влезает", "сколько мест"], "Каждая лодка вмещает до 3 человек. Садиться можно только на штатные сиденья."),
    (["лодка", "какие", "виды", "названия"], "У нас три лодки: синяя — James Bond, красная — St.George, белая — St.Sofia."),
    (["права", "нужны", "водительские", "без прав"], "Для управления нашими лодками права не требуются."),
    (["управление", "руль", "газ", "реверс", ""], "Управление лодкой осуществляется с помощью руля и ручки газ-реверс. Всё подробно объясняется на инструктаже."),
    (["фото", "фоткаться", "снимать", "селфи", "на камеру"], "Можно фотографироваться на борту, если вы не отвлекаетесь от управления и не нарушаете баланс лодки."),
    (["мотор", "заглох", "остановился", "не работает", "выключился"], "Если мотор остановился:\n1. Позвоните инструктору.\n2. Переведите ручку газа в нейтраль."),
    (["врезался", "столкновение", "удар", "авария", "чп"], "При столкновении:\n1. Остановитесь.\n2. Уйдите с судового хода.\n3. Позвоните инструктору."),
    (["волна", "волнения", "если волны"], "При встречной волне: снизьте скорость, нос катера направьте под прямым углом к волне.\nБоковую волну проходите с разворотом носа в её сторону."),
    (["скорость", "максимум", "быстро", "километров"], "Максимально допустимая скорость — 15 км/ч, возле пляжей — не более 5 км/ч."),
]


def search_answer(question: str) -> str:
    q = question.lower()
    best_score = 0
    best_answer = None

    for keywords, answer in FAQ:
        score = sum(1 for word in keywords if word in q)
        if score > best_score:
            best_score = score
            best_answer = answer

    if best_score == 0:
        return "Я не нашёл подходящего ответа в правилах. Пожалуйста, уточните вопрос."

    return best_answer
