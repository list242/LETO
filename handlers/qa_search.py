import re
from pathlib import Path
# –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤–∏–ª. –ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞.
RULES_TEXT = """

1. –ë—ã—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–º –∏ —Å–æ–±—Ä–∞–Ω–Ω—ã–º.
2. –î–≤–∏–∂–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –°–¢–†–û–ì–û –ü–û –ú–ê–†–®–†–£–¢–£ (—Å–º. –ø—É–Ω–∫—Ç 3).
3. –í—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ –ø—Ä–æ—Å—å–±—ã –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, —Å—Ç—Ä–æ–≥–æ –ø–æ–¥—á–∏–Ω—è—Ç—å—Å—è –≤—Å–µ–º –µ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è–º, –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤–æ –≤—Ä–µ–º—è –ø–æ–¥—Ö–æ–¥–∞, –æ—Ç—Ö–æ–¥–∞ –æ—Ç –ø—Ä–∏—á–∞–ª–∞, –º–∞–Ω–µ–≤—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏.
4. –†–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ –ª–æ–¥–∫–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —à—Ç–∞—Ç–Ω—ã—Ö —Å–∏–¥–µ–Ω—å—è—Ö (–¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞).
5. –î–≤–∏–∂–µ–Ω–∏–µ –º–∞–ª–æ–º–µ—Ä–Ω—ã—Ö –º–æ—Ç–æ—Ä–Ω—ã—Ö —Å—É–¥–æ–≤ –≤–æ–∑–ª–µ –ø–ª—è–∂–µ–π, —Å–∞–ø-–±–æ—Ä–¥–æ–≤, —Ä—è–¥–æ–º —Å–æ –∑–Ω–∞–∫–æ–º "–Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–æ–ª–Ω–µ–Ω–∏–µ" ‚Äî –Ω–µ –±–æ–ª–µ–µ 5 –∫–º/—á.
6. –°–æ–±–ª—é–¥–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—â–µ–µ 15 –∫–º/—á.
7. –°–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∞–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å —Ä–µ–∫—É –Ω–∞—Å–∫–≤–æ–∑—å, –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç—å –Ω–∞ –≤—Å—Ç—Ä–µ—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å –∫—É—Ä—Å –¥—Ä—É–≥–∏–º —Å—É–¥–∞–º.
8. –î–≤–∏–≥–∞—Ç—å—Å—è –º–µ–∂–¥—É –±–µ—Ä–µ–≥–æ–º –∏ –±—É–µ–º (–∫—Ä–∞—Å–Ω—ã–º –∏–ª–∏ –±–µ–ª—ã–º) ‚Äî –≤–Ω–µ —Å—É–¥–æ–≤–æ–≥–æ —Ö–æ–¥–∞.
9. –ü—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ –∫—Ä—É–ø–Ω–æ–≥–æ (–∏–ª–∏ –ª—é–±–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ) —Å—É–¥–Ω–∞ ‚Äî —Å–æ–±–ª—é–¥–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∞–Ω–µ–≤—Ä–∞.
10. –†–∞–∑–≤–æ—Ä–æ—Ç —Ä–∞–∑—Ä–µ—à—ë–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥—Ä—É–≥–∏—Ö —Å—É–¥–æ–≤ –Ω–∞ —Å—É–¥–æ–≤–æ–º —Ö–æ–¥—É. –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ –Ω–∏—Ö ‚Äî –Ω–µ –º–µ–Ω–µ–µ 500 –º–µ—Ç—Ä–æ–≤. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–¥—É—â–∏—Ö —Å–∑–∞–¥–∏ —Å—É–¥–æ–≤.
11. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å–æ –≤—Å—Ç—Ä–µ—á–Ω—ã–º–∏ —Å—É–¥–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ª–µ–≤—ã–º–∏ –±–æ—Ä—Ç–∞–º–∏ (—É—Ö–æ–¥–∏—Ç—å –ø—Ä–∞–≤–µ–µ) –∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å –∫—É—Ä—Å –≤—Å—Ç—Ä–µ—á–Ω–æ–≥–æ —Å—É–¥–Ω–∞.
12. –û–±–≥–æ–Ω –¥—Ä—É–≥–∏—Ö —Å—É–¥–æ–≤ –ø–æ–¥ –º–æ—Å—Ç–∞–º–∏ –∏ –≤ —É–∑–∫–∏—Ö –º–µ—Å—Ç–∞—Ö —Ä–µ–∫–∏ –∑–∞–ø—Ä–µ—â—ë–Ω. –í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –≤—ã –Ω–µ –∏–º–µ–µ—Ç–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –æ–±—è–∑–∞–Ω—ã —É—Å—Ç—É–ø–∞—Ç—å.
13. –ü—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –≤—Å—Ç—Ä–µ—á–Ω–æ–π –≤–æ–ª–Ω—ã ‚Äî –∑–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–Ω–∏–∑–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–æ—Å –∫–∞—Ç–µ—Ä–∞ –ø–æ–¥ –ø—Ä—è–º—ã–º —É–≥–ª–æ–º –∫ –≤–æ–ª–Ω–µ.
14. –ü–æ–ø—É—Ç–Ω—É—é –≤–æ–ª–Ω—É –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏, –ø—Ä–µ–≤—ã—à–∞—é—â–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ–ª–Ω—ã.
15. –ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤—Å—Ç—Ä–µ—á–Ω—É—é –≤–æ–ª–Ω—É –Ω–∞ –±–æ–ª—å—à–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏.
16. –ë–æ–∫–æ–≤—É—é –≤–æ–ª–Ω—É –ø—Ä–æ—Ö–æ–¥–∏—Ç—å, –Ω–µ–º–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä–Ω—É–≤ –Ω–æ—Å –∫–∞—Ç–µ—Ä–∞ –≤ —Å—Ç–æ—Ä–æ–Ω—É –≤–æ–ª–Ω—ã –∏ —É–≤–µ–ª–∏—á–∏–≤ —Å–∫–æ—Ä–æ—Å—Ç—å.
17. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø—Ä–∏–±–ª–∏–∂–∞—Ç—å—Å—è –∫ –¥—Ä—É–≥–∏–º —Å—É–¥–∞–º –±–ª–∏–∂–µ 30 –º, –∫ –∫—Ä—É–ø–Ω—ã–º (—Ç–µ–ø–ª–æ—Ö–æ–¥–∞–º) ‚Äî –±–ª–∏–∂–µ 100 –º. –ò–Ω–∞—á–µ –º–∞–ª–æ–º–µ—Ä–Ω–æ–µ —Å—É–¥–Ω–æ –º–æ–∂–µ—Ç –∑–∞—Ç—è–Ω—É—Ç—å –ø–æ–¥ –∫—Ä—É–ø–Ω–æ–µ.
18. –ë—É–∫—Å–∏—Ä–æ–≤—â–∏–∫–∏ –≤–µ–π–∫–±–æ—Ä–¥–∏—Å—Ç–æ–≤ –∏–º–µ—é—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ. –î–µ—Ä–∂–∞—Ç—å –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –Ω–µ –º–µ–Ω–µ–µ 100 –º–µ—Ç—Ä–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å —á–µ–ª–æ–≤–µ–∫–æ–º –Ω–∞ –≤–æ–¥–µ.
19. –î–µ—Ä–∂–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä–∏ —Å–µ–±–µ –≤ –∑–æ–Ω–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ —Å–ª—ã—à–∏–º–æ—Å—Ç–∏. –ï—Å–ª–∏ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ 3 –≤—ã–∑–æ–≤–∞ –ø–æ–¥—Ä—è–¥, —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω –ø–æ–ø–∞–ª –≤ –∞–≤–∞—Ä–∏—é. –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—ã–µ–∑–∂–∞–µ—Ç –ø–æ GPS-–º–µ—Ç–∫–µ.
20. –°—É–¥–æ–≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –ø—Ä–∞–≤–∏–ª.
21. –ü—Ä–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–∏ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞ –ì–ò–ú–° –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —É–∫–∞–∑–∞–Ω–∏—è –∏ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.

---

üõë –ó–∞–ø—Ä–µ—â–µ–Ω–æ:
- –°–Ω–∏–º–∞—Ç—å —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã–π –∂–∏–ª–µ—Ç ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –ö—É—Ä–∏—Ç—å –Ω–∞ –±–æ—Ä—Ç—É ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –£–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –∞–ª–∫–æ–≥–æ–ª—å ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –ü—Ä–µ–≤—ã—à–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –°–∞–¥–∏—Ç—å—Å—è –Ω–∞ –±–æ—Ä—Ç –ª–æ–¥–∫–∏ ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä–∞–º ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –ü—Ä–∏—á–∞–ª–∏–≤–∞—Ç—å –≤ –Ω–µ—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.
- –û—Ç–∫–ª–æ–Ω—è—Ç—å—Å—è –æ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ ‚Äî —à—Ç—Ä–∞—Ñ 10 000 —Ä—É–±.

---

üö® –í —Å–ª—É—á–∞–µ –Ω–µ—à—Ç–∞—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:

‚úÖ –í–Ω–µ–∑–∞–ø–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–∞:
1. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.
2. –ü–æ—Å—Ç–∞–≤–∏—Ç—å —Ä—É—á–∫—É –≥–∞–∑–∞/—Ä–µ–≤–µ—Ä—Å–∞ –≤ –Ω–µ–π—Ç—Ä–∞–ª—å.

‚úÖ –í–Ω–µ–∑–∞–ø–Ω–∞—è –ø–æ—Ç–µ—Ä—è –º–æ—â–Ω–æ—Å—Ç–∏:
1. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.
2. –í–∫–ª—é—á–∏—Ç—å –∑–∞–¥–Ω—é—é –ø–µ—Ä–µ–¥–∞—á—É –¥–ª—è —Å–∞–º–æ–æ—á–∏—Å—Ç–∫–∏ –≤–∏–Ω—Ç–∞.

‚úÖ –ù–∞–µ–∑–¥ –Ω–∞ –º–µ–ª—å:
1. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.
2. –ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –ø–æ–∫–∏–¥–∞–Ω–∏—é —Å—É–¥–Ω–∞.
3. –í–∫–ª—é—á–∏—Ç—å –ø–æ–º–ø—É (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞ –ø–∞–Ω–µ–ª–∏).
4. –ñ–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞.

‚úÖ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Å—É–¥–Ω–æ–º:
1. –ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –ø–æ–∫–∏–¥–∞–Ω–∏—é —Å—É–¥–Ω–∞.
2. –£–π—Ç–∏ —Å —Å—É–¥–æ–≤–æ–≥–æ —Ö–æ–¥–∞ –∫ –±–µ—Ä–µ–≥—É.
3. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—å –≤ –Ω–µ–π—Ç—Ä–∞–ª—å.
4. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.

‚úÖ –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ø–æ–¥–≤–æ–¥–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º:
1. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.
2. –ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –ø–æ–∫–∏–¥–∞–Ω–∏—é —Å—É–¥–Ω–∞.
3. –í–∫–ª—é—á–∏—Ç—å –ø–æ–º–ø—É.
4. –î–≤–∏–≥–∞—Ç—å—Å—è –∫ –±–µ—Ä–µ–≥—É, –∂–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞.

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ì–ò–ú–°:
1. –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É.
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å —É–∫–∞–∑–∞–Ω–∏—è –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞.
3. –í–µ—Å—Ç–∏ —Å–µ–±—è –≤–µ–∂–ª–∏–≤–æ.

"""
# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ñ–∞–π–ª–∞
RULES_PATH = Path(__file__).parent.parent / "data" / "rules_cleaned.txt"

try:
    RULES_TEXT = RULES_PATH.read_text(encoding="utf-8")
except Exception:

    print("‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤–∏–ª.")

def search_answer(question: str) -> str:
    question = question.lower()
    keywords = set(re.findall(r'\b\w+\b', question))

    best_score = 0
    best_paragraph = None

    for paragraph in RULES_TEXT.split('\n'):
        words = set(re.findall(r'\b\w+\b', paragraph.lower()))
        score = len(keywords & words)
        if score > best_score:
            best_score = score
            best_paragraph = paragraph.strip()

    if best_score == 0 or not best_paragraph:
        return "–Ø –Ω–µ –Ω–∞—à—ë–ª –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Ç–æ—á–Ω–∏—Ç–µ –≤–æ–ø—Ä–æ—Å."

    return best_paragraph